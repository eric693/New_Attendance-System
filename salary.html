<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–ªè³‡ç®¡ç†ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style-redesign.css">
    <style>
        /* è–ªè³‡ç³»çµ±å°ˆå±¬æ¨£å¼ */
        .salary-card-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .metric-card {
            position: relative;
            overflow: hidden;
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .dark .metric-card {
            background: #1e293b;
            border-color: #334155;
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(102,126,234,0.1) 0%, transparent 70%);
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(102, 126, 234, 0.15);
        }
        
        .amount-display {
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        
        .detail-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #e2e8f0;
        }
        
        .dark .detail-section {
            background: #0f172a;
            border-color: #334155;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: all 0.2s;
        }
        
        .detail-row:last-child {
            border-bottom: none;
        }
        
        .detail-row:hover {
            background: rgba(102,126,234,0.05);
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            border-radius: 0.5rem;
        }
        
        .dark .detail-row {
            border-bottom-color: rgba(255,255,255,0.05);
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .section-header::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .status-calculated {
            background: linear-gradient(135deg, #4facfe15 0%, #00f2fe15 100%);
            color: #0891b2;
            border: 1px solid #06b6d420;
        }
        
        .status-paid {
            background: linear-gradient(135deg, #11998e15 0%, #38ef7d15 100%);
            color: #059669;
            border: 1px solid #10b98120;
        }
        
        .history-item {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            border: 1px solid #e2e8f0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .dark .history-item {
            background: #1e293b;
            border-color: #334155;
        }
        
        .history-item:hover {
            transform: translateX(8px);
            box-shadow: 0 10px 20px rgba(102,126,234,0.15);
            border-color: #667eea;
        }
        
        .form-section {
            background: linear-gradient(135deg, #667eea05 0%, #764ba205 100%);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid rgba(102,126,234,0.1);
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-label {
            display: block;
            font-weight: 600;
            color: #475569;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .dark .input-label {
            color: #cbd5e1;
        }
        
        .bank-info-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea10 0%, #764ba210 100%);
            border-radius: 8px;
            border: 1px solid rgba(102,126,234,0.2);
            font-size: 0.875rem;
        }
        
        /* ä¿®å¾©ç´…è‰²é‡‘é¡é¡¯ç¤º */
        .amount-display.text-red-500 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        
        /* ä¿®å¾©ç™½è‰²é‡‘é¡é¡¯ç¤º */
        .amount-display.text-white {
            background: none;
            -webkit-background-clip: unset;
            -webkit-text-fill-color: white;
            background-clip: unset;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <!-- è–ªè³‡ç®¡ç†åˆ†é å…§å®¹ -->
    <section id="salary-view" class="container mx-auto p-4 max-w-7xl">
        
        <!-- ä¸€èˆ¬å“¡å·¥ï¼šæˆ‘çš„è–ªè³‡ -->
        <div id="employee-salary-section" class="space-y-6">
            
            <!-- æœ¬æœˆè–ªè³‡å¡ç‰‡ -->
            <div class="card p-8">
                <div class="section-header">
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">
                        æœ¬æœˆè–ªè³‡
                    </h2>
                </div>
                
                <div id="current-salary-loading" class="text-center py-12">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600 dark:text-gray-400">è¼‰å…¥ä¸­...</p>
                </div>
                
                <div id="current-salary-empty" class="text-center py-12 text-gray-500" style="display: none;">
                    <div class="text-6xl mb-4 opacity-20">â‚ª</div>
                    <p class="text-lg font-medium">æœ¬æœˆè–ªè³‡å°šæœªè¨ˆç®—</p>
                    <p class="text-sm mt-2">è«‹è¯ç¹«ç®¡ç†å“¡é€²è¡Œè–ªè³‡è¨ˆç®—</p>
                </div>
                
                <div id="current-salary-content" style="display: none;">
                    <!-- è–ªè³‡æ¦‚è¦½ -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="metric-card">
                            <div class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
                                æ‡‰ç™¼ç¸½é¡
                            </div>
                            <div class="amount-display" id="gross-salary">--</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
                                æ‰£æ¬¾ç¸½é¡
                            </div>
                            <div class="amount-display text-red-500" id="total-deductions">--</div>
                        </div>
                        <div class="metric-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
                            <div class="text-sm font-semibold text-white uppercase tracking-wider mb-2">
                                å¯¦ç™¼é‡‘é¡
                            </div>
                            <div class="amount-display text-white" id="net-salary">--</div>
                        </div>
                    </div>
                    
                    <!-- è©³ç´°è³‡è¨Š -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- æ‡‰ç™¼é …ç›® -->
                        <div class="detail-section">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">æ‡‰ç™¼é …ç›®</h3>
                            <div class="space-y-1">
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">åŸºæœ¬è–ªè³‡</span>
                                    <span id="detail-base-salary" class="font-mono font-semibold text-gray-800 dark:text-white">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">å¹³æ—¥åŠ ç­è²»</span>
                                    <span id="detail-weekday-overtime" class="font-mono font-semibold text-gray-800 dark:text-white">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">ä¼‘æ¯æ—¥åŠ ç­è²»</span>
                                    <span id="detail-restday-overtime" class="font-mono font-semibold text-gray-800 dark:text-white">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">åœ‹å®šå‡æ—¥åŠ ç­è²»</span>
                                    <span id="detail-holiday-overtime" class="font-mono font-semibold text-gray-800 dark:text-white">--</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æ‰£æ¬¾é …ç›® -->
                        <div class="detail-section">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">æ‰£æ¬¾é …ç›®</h3>
                            <div class="space-y-1">
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">å‹ä¿è²»</span>
                                    <span id="detail-labor-fee" class="font-mono font-semibold text-red-600 dark:text-red-400">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">å¥ä¿è²»</span>
                                    <span id="detail-health-fee" class="font-mono font-semibold text-red-600 dark:text-red-400">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">å°±æ¥­ä¿éšªè²»</span>
                                    <span id="detail-employment-fee" class="font-mono font-semibold text-red-600 dark:text-red-400">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">å‹é€€è‡ªæ</span>
                                    <span id="detail-pension-self" class="font-mono font-semibold text-red-600 dark:text-red-400">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">æ‰€å¾—ç¨…</span>
                                    <span id="detail-income-tax" class="font-mono font-semibold text-red-600 dark:text-red-400">--</span>
                                </div>
                                <div class="detail-row">
                                    <span class="text-gray-600 dark:text-gray-400">è«‹å‡æ‰£æ¬¾</span>
                                    <span id="detail-leave-deduction" class="font-mono font-semibold text-red-600 dark:text-red-400">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- éŠ€è¡Œè³‡è¨Š -->
                    <div class="mt-6 detail-section">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">åŒ¯æ¬¾è³‡è¨Š</h3>
                        <div class="flex flex-wrap gap-4">
                            <div class="bank-info-badge">
                                <span class="text-gray-600 dark:text-gray-400">éŠ€è¡Œ</span>
                                <span id="detail-bank-name" class="font-semibold text-gray-800 dark:text-white">--</span>
                            </div>
                            <div class="bank-info-badge">
                                <span class="text-gray-600 dark:text-gray-400">å¸³è™Ÿ</span>
                                <span id="detail-bank-account" class="font-mono font-semibold text-gray-800 dark:text-white">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è–ªè³‡æ­·å² -->
            <div class="card p-8">
                <div class="section-header">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                        è–ªè³‡æ­·å²
                    </h2>
                </div>
                
                <div id="salary-history-loading" class="text-center py-8">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600 dark:text-gray-400">è¼‰å…¥ä¸­...</p>
                </div>
                
                <div id="salary-history-empty" class="text-center py-12 text-gray-500" style="display: none;">
                    <div class="text-6xl mb-4 opacity-20">ğŸ“Š</div>
                    <p class="text-lg font-medium">å°šç„¡æ­·å²è¨˜éŒ„</p>
                </div>
                
                <div id="salary-history-list" class="space-y-3"></div>
            </div>
        </div>
        
        <!-- ç®¡ç†å“¡ï¼šè–ªè³‡ç®¡ç† -->
        <div id="admin-salary-section" class="space-y-6" style="display: none;">
            
            <!-- å“¡å·¥è–ªè³‡è¨­å®š -->
            <div class="card p-8">
                <div class="section-header">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                        å“¡å·¥è–ªè³‡è¨­å®š
                    </h2>
                </div>
                
                <form id="salary-config-form" class="form-section">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="input-group">
                            <label class="input-label">å“¡å·¥ID *</label>
                            <input type="text" id="config-employee-id" required 
                                class="form-input" placeholder="è«‹è¼¸å…¥å“¡å·¥ID">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">å“¡å·¥å§“å *</label>
                            <input type="text" id="config-employee-name" required 
                                class="form-input" placeholder="è«‹è¼¸å…¥å“¡å·¥å§“å">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">èº«åˆ†è­‰å­—è™Ÿ</label>
                            <input type="text" id="config-id-number" 
                                class="form-input" placeholder="A123456789">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">å“¡å·¥é¡å‹ *</label>
                            <select id="config-employee-type" required class="form-select">
                                <option value="æ­£è·">æ­£è·</option>
                                <option value="ç´„è˜">ç´„è˜</option>
                                <option value="å·¥è®€">å·¥è®€</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">è–ªè³‡é¡å‹ *</label>
                            <select id="config-salary-type" required class="form-select">
                                <option value="æœˆè–ª">æœˆè–ªåˆ¶</option>
                                <option value="æ™‚è–ª">æ™‚è–ªåˆ¶</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">åŸºæœ¬è–ªè³‡ *</label>
                            <input type="number" id="config-base-salary" required 
                                class="form-input" placeholder="27470" min="183">
                            <small class="text-xs text-gray-500 mt-1 block">æœˆè–ªæœ€ä½27,470å…ƒ / æ™‚è–ªæœ€ä½183å…ƒ</small>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">éŠ€è¡Œä»£ç¢¼ *</label>
                            <select id="config-bank-code" required class="form-select">
                                <option value="">è«‹é¸æ“‡éŠ€è¡Œ</option>
                                <option value="004">004 - è‡ºç£éŠ€è¡Œ</option>
                                <option value="005">005 - è‡ºç£åœŸåœ°éŠ€è¡Œ</option>
                                <option value="006">006 - åˆä½œé‡‘åº«</option>
                                <option value="007">007 - ç¬¬ä¸€éŠ€è¡Œ</option>
                                <option value="008">008 - è¯å—éŠ€è¡Œ</option>
                                <option value="009">009 - å½°åŒ–éŠ€è¡Œ</option>
                                <option value="012">012 - å°åŒ—å¯Œé‚¦</option>
                                <option value="013">013 - åœ‹æ³°ä¸–è¯</option>
                                <option value="017">017 - å…†è±éŠ€è¡Œ</option>
                                <option value="803">803 - è¯é‚¦éŠ€è¡Œ</option>
                                <option value="806">806 - å…ƒå¤§éŠ€è¡Œ</option>
                                <option value="807">807 - æ°¸è±éŠ€è¡Œ</option>
                                <option value="808">808 - ç‰å±±éŠ€è¡Œ</option>
                                <option value="809">809 - å‡±åŸºéŠ€è¡Œ</option>
                                <option value="812">812 - å°æ–°éŠ€è¡Œ</option>
                                <option value="822">822 - ä¸­åœ‹ä¿¡è¨—</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">éŠ€è¡Œå¸³è™Ÿ *</label>
                            <input type="text" id="config-bank-account" required 
                                class="form-input" placeholder="è«‹è¼¸å…¥éŠ€è¡Œå¸³è™Ÿ">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">åˆ°è·æ—¥æœŸ</label>
                            <input type="date" id="config-hire-date" class="form-input">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">ç™¼è–ªæ—¥</label>
                            <input type="number" id="config-payment-day" 
                                class="form-input" value="5" min="1" max="31">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">å‹é€€è‡ªæç‡ (%)</label>
                            <input type="number" id="config-pension-rate" 
                                class="form-input" value="0" min="0" max="6" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">å‹ä¿è²»ï¼ˆå€‹äººè² æ“”ï¼‰</label>
                            <input type="number" id="config-labor-fee" 
                                class="form-input" value="0" placeholder="0">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">å¥ä¿è²»ï¼ˆå€‹äººè² æ“”ï¼‰</label>
                            <input type="number" id="config-health-fee" 
                                class="form-input" value="0" placeholder="0">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">å°±æ¥­ä¿éšªè²»</label>
                            <input type="number" id="config-employment-fee" 
                                class="form-input" value="0" placeholder="0">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">æ‰€å¾—ç¨…</label>
                            <input type="number" id="config-income-tax" 
                                class="form-input" value="0" placeholder="0">
                        </div>
                    </div>
                    
                    <div class="input-group mt-6">
                        <label class="input-label">å‚™è¨»</label>
                        <textarea id="config-note" rows="2" 
                            class="form-textarea" placeholder="å…¶ä»–èªªæ˜äº‹é …"></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary w-full mt-6">
                        å„²å­˜è–ªè³‡è¨­å®š
                    </button>
                </form>
            </div>
            
            <!-- è–ªè³‡è¨ˆç®— -->
            <div class="card p-8">
                <div class="section-header">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                        è–ªè³‡è¨ˆç®—
                    </h2>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="input-group">
                        <label class="input-label">å“¡å·¥ID</label>
                        <input type="text" id="calc-employee-id" 
                            class="form-input" placeholder="è«‹è¼¸å…¥å“¡å·¥ID">
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">è¨ˆç®—æœˆä»½</label>
                        <input type="month" id="calc-year-month" class="form-input">
                    </div>
                    
                    <div class="flex items-end">
                        <button id="calculate-salary-btn" class="btn btn-primary w-full">
                            é–‹å§‹è¨ˆç®—
                        </button>
                    </div>
                </div>
                
                <div id="salary-calculation-result" class="space-y-4" style="display: none;">
                    <!-- è¨ˆç®—çµæœæœƒå‹•æ…‹é¡¯ç¤ºåœ¨é€™è£¡ -->
                </div>
            </div>
            
            <!-- æ‰€æœ‰å“¡å·¥è–ªè³‡åˆ—è¡¨ -->
            <div class="card p-8">
                <div class="section-header">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">
                        æ‰€æœ‰å“¡å·¥è–ªè³‡
                    </h2>
                </div>
                
                <div class="mb-6 max-w-md">
                    <label class="input-label">æŸ¥è©¢æœˆä»½</label>
                    <input type="month" id="filter-year-month" class="form-input">
                </div>
                
                <div id="all-salary-loading" class="text-center py-8">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600 dark:text-gray-400">è¼‰å…¥ä¸­...</p>
                </div>
                
                <div id="all-salary-list" class="space-y-3"></div>
            </div>
        </div>
    </section>
    
    <!-- Notification -->
    <div id="notification" class="notification">
        <p id="notification-message"></p>
    </div>
    
    <script src="config.js"></script>
    <script src="salary.js"></script>
</body>
</html>